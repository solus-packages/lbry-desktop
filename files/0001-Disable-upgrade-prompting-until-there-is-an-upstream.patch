From bd8c56455ceeff0e4a852992577c6f83a15c6e4c Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Wed, 13 Dec 2017 20:59:24 +0200
Subject: [PATCH 1/1] Disable upgrade prompting until there is an upstream
 option to disable it.

---
 src/renderer/component/header/view.jsx  | 8 --------
 src/renderer/component/splash/view.jsx  | 2 --
 src/renderer/modal/modalRouter/view.jsx | 3 ---
 src/renderer/redux/actions/app.js       | 4 ----
 4 files changed, 17 deletions(-)

diff --git a/src/renderer/component/header/view.jsx b/src/renderer/component/header/view.jsx
index 1e83abbe..09a791f0 100644
--- a/src/renderer/component/header/view.jsx
+++ b/src/renderer/component/header/view.jsx
@@ -85,14 +85,6 @@ export const Header = props => {
           title={__("Settings")}
         />
       </div>
-      {isUpgradeAvailable && (
-        <Link
-          onClick={() => downloadUpgrade()}
-          button="primary button--flat"
-          icon="icon-arrow-up"
-          label={__("Upgrade App")}
-        />
-      )}
     </header>
   );
 };
diff --git a/src/renderer/component/splash/view.jsx b/src/renderer/component/splash/view.jsx
index 5697eb7c..b80df840 100644
--- a/src/renderer/component/splash/view.jsx
+++ b/src/renderer/component/splash/view.jsx
@@ -3,7 +3,6 @@ import PropTypes from "prop-types";
 import lbry from "lbry.js";
 import LoadScreen from "../load_screen.js";
 import ModalIncompatibleDaemon from "modal/modalIncompatibleDaemon";
-import ModalUpgrade from "modal/modalUpgrade";
 import ModalDownloading from "modal/modalDownloading";
 import * as modals from "constants/modal_types";
 
@@ -114,7 +113,6 @@ export class SplashScreen extends React.PureComponent {
             in the modals won't work. */}
         {modal == "incompatibleDaemon" &&
           isRunning && <ModalIncompatibleDaemon />}
-        {modal == modals.UPGRADE && isRunning && <ModalUpgrade />}
         {modal == modals.DOWNLOADING &&
           isRunning && <ModalDownloading />}
       </div>
diff --git a/src/renderer/modal/modalRouter/view.jsx b/src/renderer/modal/modalRouter/view.jsx
index 6ffcb715..4047f70e 100644
--- a/src/renderer/modal/modalRouter/view.jsx
+++ b/src/renderer/modal/modalRouter/view.jsx
@@ -2,7 +2,6 @@ import React from "react";
 import ModalError from "modal/modalError";
 import ModalAuthFailure from "modal/modalAuthFailure";
 import ModalDownloading from "modal/modalDownloading";
-import ModalUpgrade from "modal/modalUpgrade";
 import ModalWelcome from "modal/modalWelcome";
 import ModalFirstReward from "modal/modalFirstReward";
 import ModalRewardApprovalRequired from "modal/modalRewardApprovalRequired";
@@ -110,8 +109,6 @@ class ModalRouter extends React.PureComponent {
     const { modal, modalProps } = this.props;
 
     switch (modal) {
-      case modals.UPGRADE:
-        return <ModalUpgrade {...modalProps} />;
       case modals.DOWNLOADING:
         return <ModalDownloading {...modalProps} />;
       case modals.ERROR:
diff --git a/src/renderer/redux/actions/app.js b/src/renderer/redux/actions/app.js
index 46b2e5fa..a1278f20 100644
--- a/src/renderer/redux/actions/app.js
+++ b/src/renderer/redux/actions/app.js
@@ -223,10 +223,6 @@ export function doDaemonReady() {
     dispatch(doFetchFileInfosAndPublishedClaims());
     dispatch(doFetchRewardedContent());
     dispatch(doFetchTransactions(false));
-    if (!selectIsUpgradeSkipped(state)) {
-      dispatch(doCheckUpgradeAvailable());
-    }
-    dispatch(doCheckUpgradeSubscribe());
   };
 }
 
-- 
2.15.1

