From eb80c10e0277be05c30dfd29c834c3b5b5291f86 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Tue, 30 Jan 2018 22:35:38 +0200
Subject: [PATCH 1/1] Disable upgrade prompting until there is an upstream
 option to disable it.

---
 src/renderer/component/header/view.jsx  | 8 --------
 src/renderer/component/splash/view.jsx  | 1 -
 src/renderer/modal/modalRouter/view.jsx | 3 ---
 src/renderer/redux/actions/app.js       | 4 ----
 4 files changed, 16 deletions(-)

diff --git a/src/renderer/component/header/view.jsx b/src/renderer/component/header/view.jsx
index 7109d7b8..3a021f68 100644
--- a/src/renderer/component/header/view.jsx
+++ b/src/renderer/component/header/view.jsx
@@ -87,14 +87,6 @@ export const Header = props => {
           title={__('Settings')}
         />
       </div>
-      {(autoUpdateDownloaded || (process.platform === 'linux' && isUpgradeAvailable)) && (
-        <Link
-          onClick={() => downloadUpgradeRequested()}
-          button="primary button--flat"
-          icon="icon-arrow-up"
-          label={__('Upgrade App')}
-        />
-      )}
     </header>
   );
 };
diff --git a/src/renderer/component/splash/view.jsx b/src/renderer/component/splash/view.jsx
index 02bb7c23..5d4f6582 100644
--- a/src/renderer/component/splash/view.jsx
+++ b/src/renderer/component/splash/view.jsx
@@ -103,7 +103,6 @@ export class SplashScreen extends React.PureComponent {
             daemon doesn't let you quit during startup, so the "Quit" buttons
             in the modals won't work. */}
         {modal == 'incompatibleDaemon' && isRunning && <ModalIncompatibleDaemon />}
-        {modal == modals.UPGRADE && isRunning && <ModalUpgrade />}
         {modal == modals.DOWNLOADING && isRunning && <ModalDownloading />}
       </div>
     );
diff --git a/src/renderer/modal/modalRouter/view.jsx b/src/renderer/modal/modalRouter/view.jsx
index 34188317..ffc78b44 100644
--- a/src/renderer/modal/modalRouter/view.jsx
+++ b/src/renderer/modal/modalRouter/view.jsx
@@ -4,7 +4,6 @@ import ModalAuthFailure from 'modal/modalAuthFailure';
 import ModalDownloading from 'modal/modalDownloading';
 import ModalAutoUpdateDownloaded from 'modal/modalAutoUpdateDownloaded';
 import ModalAutoUpdateConfirm from 'modal/modalAutoUpdateConfirm';
-import ModalUpgrade from 'modal/modalUpgrade';
 import ModalWelcome from 'modal/modalWelcome';
 import ModalFirstReward from 'modal/modalFirstReward';
 import ModalRewardApprovalRequired from 'modal/modalRewardApprovalRequired';
@@ -101,8 +100,6 @@ class ModalRouter extends React.PureComponent {
     const { modal, modalsAllowed, modalProps } = this.props;
 
     switch (modal) {
-      case modals.UPGRADE:
-        return <ModalUpgrade {...modalProps} />;
       case modals.DOWNLOADING:
         return <ModalDownloading {...modalProps} />;
       case modals.AUTO_UPDATE_DOWNLOADED:
diff --git a/src/renderer/redux/actions/app.js b/src/renderer/redux/actions/app.js
index 0d94fe4d..d60864f4 100644
--- a/src/renderer/redux/actions/app.js
+++ b/src/renderer/redux/actions/app.js
@@ -292,10 +292,6 @@ export function doDaemonReady() {
     dispatch(doBalanceSubscribe());
     dispatch(doFetchFileInfosAndPublishedClaims());
     dispatch(doFetchRewardedContent());
-    if (!selectIsUpgradeSkipped(state)) {
-      dispatch(doCheckUpgradeAvailable());
-    }
-    dispatch(doCheckUpgradeSubscribe());
   };
 }
 
-- 
2.16.1

